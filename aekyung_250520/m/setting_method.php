<link rel="stylesheet" href="./css/musign/method.css">

<div class="method_container">
    <h2 class="bold">공정위 배너/위젯 적용 방법</h2>
    <div class="contents">
        <ul class="left">
            <li class="tab_item" data-list="0">
                <a>공정위 배너 적용</a>
            </li>
            <li class="tab_item border" data-list="1"><a>위젯 설치</a></li>
        </ul>
        <div class="right">
            <div class="tab_wrap">
                <div class="tab_cont">
                    <ul class="tab_step flex step0">
                        <li class="select">
                            <div class="step_num bold">STEP.1</div>
                            <p class="bold">배너 삽입</p>
                        </li>
                        <li>
                            <div class="step_num bold">STEP.2</div>
                            <p class="bold">배너 삽입</p>
                        </li>
                        <li>
                            <div class="step_num bold">STEP.3</div>
                            <p class="bold">이미지 생성</p>
                        </li>
                    </ul>
                    <div class="step_cont step_con0">
                        <div class="step_item">
                            <div class="con_tit">세팅 설정</div>
                            <ul class="con_list">
                                <li class="con_item">
                                    <div>
                                        <p class="sub_tit f_fs"><span class="list_num">1</span>마우스로 이미지를 드래그하여 복사한다.</p>
                                    </div>
                                    <div>
                                        <img src="/img/front/popup/ftc1_1.png" alt="세팅 설정" />
                                    </div>
                                </li>
                            </ul>
                            <div class="btn f_c">
                                <div class="next" data-page="1"><a>다음으로</a></div>
                            </div>
                        </div>
                        <div class="step_item">
                        <div class="con_tit">배너 삽입</div>
                            <ul class="con_list">
                                <li class="con_item">
                                    <div>
                                        <p class="sub_tit f_fs">
                                            <span class="list_num">2</span>
                                            콘텐츠 본문에 붙여넣기 해준다.
                                        </p>
                                    </div>
                                    <div>
                                        <img src="/img/front/popup/ftc1_2.png" alt="배너 삽입" />
                                    </div>
                                </li>
                            </ul>
                            <div class="btn f_c">
                                <div class="prev" data-page="0"><a>이전으로</a></div>
                                <div class="next" data-page="2"><a>다음으로</a></div>
                            </div>
                        </div>
                        <div class="step_item">
                        <div class="con_tit">이미지 생성</div>
                            <ul class="con_list">
                                <li class="con_item">
                                    <div>
                                        <p class="sub_tit f_fs">
                                            <span class="list_num">3</span>
                                            링크 복사하기 버튼을 눌러 복사된 링크를<br /> 본문 이미지에 삽입한다.
                                        </p>
                                        <div class="copy_btn">
                                            <a href="/">배너 링크 복사하기<img src="/img/front/board/copy.webp" alt="카피" /></a>
                                        </div>
                                    </div>
                                    <div>
                                        <img src="/img/front/popup/ftc1_3.png" alt="이미지 생성" />
                                    </div>
                                </li>
                            </ul>
                            <div class="btn f_c">
                                <div class="prev" data-page="1"><a>이전으로</a></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab_cont">
                    <ul class="tab_step flex step1">
                        <li class="select">
                            <div class="step_num bold">STEP.1</div>
                            <p class="bold">위젯 코드 복사</p>
                        </li>
                        <li>
                            <div class="step_num bold">STEP.2</div>
                            <p class="bold">위젯 코드 등록</p>
                        </li>
                        <li>
                            <div class="step_num bold">STEP.3</div>
                            <p class="bold">위젯 적용 완료</p>
                        </li>
                    </ul>
                    <div class="step_cont step_con1">
                        <div class="step_item">
                            <div class="con_tit">위젯 코드 복사하기</div>
                            <ul class="con_list">
                                <li class="con_item">
                                    <div>
                                        <p class="sub_tit f_fs"><span class="list_num">1</span>기본 위젯 코드를 복사한다.</p>
                                        <div class="copy_btn">
                                            <a href="/">위젯 코드 복사하기<img src="/img/front/board/copy.webp" alt="카피" /></a>
                                        </div>
                                    </div>
                                    <div>
                                        <img src="/img/front/popup/widget1_1.png" alt="위젯 코드 복사하기" />
                                    </div>
                                </li>
                            </ul>
                            <div class="btn f_c">
                                <div class="next" data-page="1"><a>다음으로</a></div>
                            </div>
                        </div>
                        <div class="step_item">
                            <div class="con_tit">위젯 등록 하러가기</div>
                            <ul class="con_list">
                                <li class="con_item">
                                    <div>
                                        <p class="sub_tit f_fs">
                                            <span class="list_num">2</span>
                                            프로필 관리 > 꾸미기 설정 > 레이아웃 위젯 설정 ><br />
                                            위젯 직접 등록 BETA 메뉴에서 복사된<br />
                                            소스코드를 Ctrl+V로 붙여넣기
                                        </p>
                                    </div>
                                    <div>
                                        <img src="/img/front/popup/widget1_2.png" alt="위젯 등록 하러가기" />
                                    </div>
                                </li>
                            </ul>
                            <div class="btn f_c">
                                <div class="prev" data-page="0"><a>이전으로</a></div>
                                <div class="next" data-page="2"><a>다음으로</a></div>
                            </div>
                        </div>
                        <div class="step_item">
                            <div class="con_tit">위젯 적용 완료</div>
                            <ul class="con_list">
                                <li class="con_item">
                                    <div>
                                        <p class="sub_tit f_fs"><span class="list_num">3</span>지정하고 싶은 위치에 마우스로 옮긴다.</p>
                                    </div>
                                    <div>
                                        <img src="/img/front/popup/widget1_3.png" alt="위젯 적용 완료" />
                                    </div>
                                </li>
                            </ul>
                            <div class="btn f_c">
                                <div class="prev" data-page="1"><a>이전으로</a></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    const tabList = document.querySelectorAll(".tab_item");
    const tabContent = document.querySelectorAll(".tab_cont");
    const stepUi = document.querySelectorAll(".tab_step > li");
    const stepContent = document.querySelectorAll(".step_item");
    let clickIndex = 0;
    let number = 0;

    // 스마트 배너 이용방법 활성화
	$('.smart_btn a').click(function(e){
		e.preventDefault();
        clickIndex = 0;
        number = 0;
		$('#smart_banner').show();

        // 페이지 접근 시, 보여질 컨텐츠 & 탭 지정
        tabList[clickIndex].classList.add("active");
        tabContent[clickIndex].style.display = "block";
        stepContent[0].style.display = "block";
        stepUi[0].classList.add("select");

        updateStepBtnListeners();
	});

    // 위젯 이용방법 팝업 활성화
	$('.widget_btn a').click(function(e){
		e.preventDefault();
        clickIndex = 2;
        number = 2;
		$('#smart_banner').show();

        // 페이지 접근 시, 보여질 컨텐츠 & 탭 지정
        tabList[clickIndex].classList.add("active");
        tabContent[clickIndex].style.display = "block";
        stepContent[4].style.display = "block";
        stepUi[4].classList.add("select");

        updateStepBtnListeners();
	});

    // 팝업 닫기
    $('#smart_banner .btn_x').click(function(){
        $('#smart_banner').hide();

        // 왼쪽 탭 초기화
        for(let i = 0; i < tabList.length; i++) {
            tabList[i].classList.remove("active");
        }

        // step 초기화
        for(let i = 0; i < stepUi.length; i++) {
            stepUi[i].classList.remove("select");
        }

        // tabContent 초기화
        for(let i = 0; i < tabContent.length; i++) {
            tabContent[i].style.display = "none";
        }

        // step 초기화
        for(let i = 0; i < stepContent.length; i++) {
            stepContent[i].style.display = "none";
        }

    });

    function updateStepBtnListeners() {
        const stepBtn = document.querySelectorAll(`.step_con${number} .btn > div`);

        Array.prototype.forEach.call(stepBtn, function(item){
            item.children[0].addEventListener("click", (e) => {
                e.preventDefault();

                let stepNum = item.getAttribute('data-page');
                const step = document.querySelectorAll(`.step${number} > li`);
                const stepContent2 = document.querySelectorAll(`.step_con${number} > div`);

                Array.prototype.forEach.call(stepContent2, (item, _) => {
                    item.style.display = "none";
                });

                Array.prototype.forEach.call(step, (item, _) => {
                    item.classList.remove("select");
                })
                
                window.scrollTo(0, 240); // 버튼 누르면 스크롤 상단으로 이동
                stepContent2[stepNum].style.display = "block";
                step[stepNum].classList.add("select");
            })
        });
    };

    Array.prototype.forEach.call(tabList, function(list) {
        list.children[0].addEventListener("click", (e) => {
            e.preventDefault();

            let tabNum = list.children[0].parentElement.getAttribute('data-list');
            const step = document.querySelectorAll(`.step${tabNum} > li`);
            const stepContent = document.querySelectorAll(`.step_con${tabNum} > div`);

            number = tabNum; // number 재할당

            Array.prototype.forEach.call(tabContent, (item, _) => {
                item.style.display = "none";
            });

            Array.prototype.forEach.call(stepContent, (item, _) => {
                item.style.display = "none";
            });

            Array.prototype.forEach.call(tabList, (item, _) => {
                item.classList.remove("active");
            });

            if(step.length !== 0){
                Array.prototype.forEach.call(step, (item, _) => {
                    item.classList.remove("select");
                });
                step[0].classList.add("select"); // 왼쪽 tab 이동 시, step 초기화
            }
    
            tabContent[tabNum].style.display = "block"; // 현재 누른탭 컨텐츠 디스플레이 block
            tabList[tabNum].classList.add("active"); // 탭 스타일 적용
            stepContent[0].style.display = "block"; // 왼쪽 tab 이동 시, step 초기화

            updateStepBtnListeners();
        })
    });

    updateStepBtnListeners();
</script>